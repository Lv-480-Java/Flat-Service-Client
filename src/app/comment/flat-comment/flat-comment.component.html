<div fxLayout="row" fxLayoutAlign="center none">
  <div>
    <mat-card class="mat-elevation-z5" style="width: 900px; margin-right: 16px">
      <h1>Коментарі</h1>
      <p *ngIf="comments.length>0">Кількість коментарів {{comments.length}}</p>
      <hr>
      <div>
        <input
          type="text"
          class="form-control"
          placeholder="Text..."
          [(ngModel)]="text"
          autocomplete="off"
          matInput
          (keyup.enter)="add()"
        >
        <button style="margin-top: 10px" (click)="add()" fxFlexAlign="end end" class="donate" mat-raised-button
                color="primary" >
          Додати коментар
        </button>
      </div>
    </mat-card>

    <div *ngIf="comments.length; else noComments">
      <mat-card class="mat-elevation-z5"  style="width: 900px; margin-top: 16px; position: relative" *ngFor="let comment of comments">
        <p style="font-size: 16px; word-wrap: break-word; width: 80%" *ngIf="comment.text!==null"> {{comment.text}}</p>
        <div mat-card-avatar class="example-header-image" style="position: absolute; right: 20px; top: 15px"></div>
        <a href="/short_profile" style="font-size: 12px; position: absolute; right: 24px; top: 53px" > {{comment.userAuthor.username}}</a>
        <mat-card-subtitle>{{comment.publicationDate}}</mat-card-subtitle>
        <button *ngIf="comment.userAuthor.id==isId" style="position: absolute; right: 35px; top: 90px" (click)="remove(comment.id)" fxFlexAlign="end end" class="donate" mat-raised-button
                color="primary">
         Видалити
        </button>

        <button style="margin-top: 10px" style="margin-bottom: 10px;" fxFlexAlign="end end" class="donate" mat-raised-button
                color="primary" (click)="isTrue=!isTrue" (click)="commentId=comment.id" >Відповісти</button>
        <button style="margin-top: 10px; margin-left: 10px; margin-bottom: 10px" fxFlexAlign="end end" class="donate" mat-raised-button
                color="primary" (click)="isList=!isList" (click)="commentId=comment.id" >Відповіді</button>
        <div *ngIf="isTrue && commentId==comment.id">
          <app-coments-about-comment [commentId]="comment.id" [flatUserId]="comment.flatId"></app-coments-about-comment>
        </div>
        <div *ngIf="isList && commentId==comment.id">
          <app-list-comment [commentId]="comment.id" [flatUserId]="comment.flatId"></app-list-comment>
        </div>
      </mat-card>
    </div>
    <ng-template #noComments>
      <p style="margin:20px; font-size: 20px">Коментарів немає</p>
    </ng-template>

  </div>
</div>
